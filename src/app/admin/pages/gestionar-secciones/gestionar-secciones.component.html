@if(loading) {
    <mat-progress-bar mode="indeterminate" class="-mt-7 mb-8"></mat-progress-bar>
}
<div class="mx-5 mt-2">
    <p class="text-xl font-medium mb-4">Gestionar Secciones</p>
    <div class="grid md:grid-cols-4 md:grid-rows-1 gap-4 md:gap-y-0  grid-cols-2 grid-rows-2">
        <div class="order-1 flex items-center text-gray-400 focus-whitin:text-gray-600 text-sm">
            <i class="fa-solid fa-magnifying-glass absolute ml-3 pointer-events-none"></i>
            <input 
                type="text"
                placeholder="Buscar"
                autocomplete="off"
                [(ngModel)]="searchTerm"
                class="px-3 py-2 font-medium placeholder-gray-500 text-black rounded-2xl border-none
                ring-2 ring-gray-300 focus:ring-gray-500 focus:ring-2 pr-3 pl-10 max-[1184px]:w-40 max-[956px]:w-32 max-md:w-40"
            >
        </div>
        <div class="order-3 md:order-2 flex justify-start text-sm">
            <select
                [(ngModel)]="gradoSelected"
                class="px-3 py-2 font-medium placeholder-gray-500 text-black rounded-2xl border-none
                ring-2 ring-gray-300 focus:ring-gray-500 focus:ring-2 pr-3 max-[1184px]:w-40 max-[956px]:w-32 max-md:w-40"
            >
                <option value="all">Todos los Grados</option>
                @for(e of grados; track e.grado_id) {
                    <option [value]="e.grado_id">{{ e.nombre }}</option>
                }
            </select>
        </div>
        <p class="order-4 md:order-3 flex max-md:justify-end md:justify-start text-sm">
            <select
                [(ngModel)]="gradoSelected"
                class="px-3 py-2 font-medium placeholder-gray-500 text-black rounded-2xl border-none
                ring-2 ring-gray-300 focus:ring-gray-500 focus:ring-2 pr-3 max-[1184px]:w-40 max-[956px]:w-32 max-md:w-40"
            >
                <option value="all">Todos los Periodos</option>
                @for(e of periodos; track e.periodo_id) {
                    <option [value]="e.periodo_id">{{ e.anio }}</option>
                }
            </select>
        </p>
        <div class="order-2 md:order-4 flex justify-end">
            <button 
                (click)="agregarSeccion()"
                class="bg-gradient-to-r from-gray-600 to-gray-500 text-white rounded-lg w-20
                text-sm p-2 -me-2 md:-me-0 font-medium shadow-lg hover:from-gray-500 hover:to-gray-400 duration-300 hover:scale-110" 
            > + Agregar </button>
        </div>
    </div>
</div>
<app-table 
    [columns]="columns" 
    [data]="displayedSecciones()"
    [trackByField]="trackByField"
    [loadedComplete]="loadedComplete"
    [editActive]="true"
    [deleteActive]="true"
    (editAction)="editarSeccion($event.isEdit, $event.id)"
    (deleteAction)="eliminarSeccion($event.isDeleted, $event.id)"
></app-table>